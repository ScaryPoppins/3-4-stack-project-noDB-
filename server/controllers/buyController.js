const items = [
    {
        id: 1,
        image: 'https://i.kinja-img.com/gawker-media/image/upload/s--rPjC8x1n--/c_fit,f_auto,fl_progressive,q_80,w_636/18r6nnbg5yjj1jpg.jpg',
        price: "about $350",
        year: '1994',
        make: 'Dodge',
        model: 'Van',
        mileage: '10,000',
        color: 'Red',
        offering: 'candy',
        contactName: 'Mike Jones',
        contactNumber: '281-330-8004',
        description: "For sale is the best candy van ever.   I've had plenty of satisfied customers throughout the years, and so will you."
        
    },
    {
        id: 2,
        image: 'https://farm5.staticflickr.com/4658/28074207609_54497871d4_b.jpg',
        price: 'about $350',
        year: '1987',
        make: 'Toyota',
        model: 'Van',
        mileage: '345,000',
        color: 'Blue',
        offering: 'candy',
        contactName: 'Jenny',
        contactNumber: '867-5309',
        description: 'This was once a famous van back in the day.  This is your chance to buy a piece of history.  Many of folks have gone for a ride in this candy van.'
        
    },
    {
        id: 3,
        image: 'https://ogwnostalgia.files.wordpress.com/2017/12/rarepokemoncreepervan1.jpg?w=510&h=315',
        price: '400 magikarp candy',
        year: '2010',
        make: 'Dodge',
        model: 'Ram Van',
        mileage: '249,900',
        color: 'White',
        offering: 'pokemon',
        contactName: 'Alexander Graham Bell',
        contactNumber: '1',
        description: "Attract young 30-something year olds nerds with this van"
        
    },
    {
    id: 4,
    image: 'https://i.imgur.com/zkHhggD.png',
    price: '$3.49',
    year: '2002',
    make: 'Ford',
    model: 'F-250 Commercial Cargo',
    mileage: '205,350',
    color: 'white',
    offering: 'Free Fidget Spinners',
    contactName: 'Baby Got Back',
    contactNumber: '1-900-MIX-A-LOT',
    description: "Spin your way into a good time with this van.  Donate spinners and maybe find one too"
   },
   {
    id: 5,
    image: 'https://cdn.vox-cdn.com/thumbor/8lX_pw_Yxq5ML_qHqLfs0hrMBP8=/0x0:500x281/920x0/filters:focal(0x0:500x281):format(webp):no_upscale()/cdn.vox-cdn.com/uploads/chorus_asset/file/12417753/EjoidIrT3iYMzuEyuNHR_tumblr_n9uk9eCVcE1qe0wclo1_500.0.jpg',
    price: 'Free',
    year: '2000',
    make: 'White',
    model: 'hopefully',
    mileage: 'alot',
    color: 'White',
    offering: 'Free Wi-Fi',
    contactName: 'Bradley Nowell',
    contactNumber: 'Anytime just call me - 438-4836',
    description: "Looking to find intertetz?  Get them right here!"
   },
   {
    id: 6,
    image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTtpO6kcHbJi8AizE0VuBHGjIKYs4IQmwdWWBL9YBv42Ey05tmy',
    price: '4 hours of your time',
    year: '1979',
    make: 'Dodge',
    model: 'Ram Van',
    mileage: '456,789',
    color: 'Red',
    offering: 'Mewtwo',
    contactName: 'Ash Ketchum',
    contactNumber: '1-800-CATCH-EM',
    description: "Catch em' all with this van.  You know you want to"
   },
   {
    id: 7,
    image: 'https://i.imgur.com/I3k9faY.jpg',
    price: '2 pints',
    year: '2010',
    make: 'Ford',
    model: 'E-350 Cargo Van',
    mileage: '60,000',
    color: 'White',
    offering: 'Candy',
    contactName: 'Freddy Krueger',
    contactNumber: '701-347-1936',
    description: "Whatever you do, don't fall asleep on this van.  If you believe in the boogyman, this is the one for you."
   },
   {
    id: 8,
    image: 'https://cdn.vox-cdn.com/thumbor/YbJfgwrAzj1PSkVpfgjaNQL1jTo=/0x0:600x350/920x0/filters:focal(0x0:600x350):format(webp):no_upscale()/cdn.vox-cdn.com/uploads/chorus_asset/file/12417755/RjYEcfzSyim7WLM0ZxUc_best-rape-van-ever.0.jpg',
    price: 'Your life as you know it',
    year: '1968',
    make: 'Volkswagon',
    model: 'Econovan',
    mileage: 'millions',
    color: 'White',
    offering: 'Magic',
    contactName: 'Minerva MGonagall',
    contactNumber: '605-475-6961',
    description: "Find your Hufflepuff brotheren with this van."
   },
   {
    id: 9,
    image: 'https://getsokt.com/wp-content/uploads/2017/01/14-hilarious-fails-79.jpg',
    price: '$2000',
    year: '1998',
    make: 'Toyota',
    model: 'Sienna',
    mileage: '108,000',
    color: 'Grey',
    offering: 'Candy',
    contactName: 'Willy Wonka',
    contactNumber: '800-358-1971',
    description: "Step up your free candy game with this van."
   },
   {
    id: 10,
    image: 'https://cdn.vox-cdn.com/thumbor/S-eN3_yplAHS3EdjRMN-d6Zfp_4=/0x0:400x189/920x0/filters:focal(0x0:400x189):format(webp):no_upscale()/cdn.vox-cdn.com/uploads/chorus_asset/file/12417759/zh1fLu7qQ1ubj16YOQI8_myvan.0.jpg',
    price: '$7,000',
    year: '1998',
    make: 'Ford',
    model: 'F-150 Commercial Cargo',
    mileage: '1998',
    color: 'White',
    offering: 'Candy, Pokemon, Puppies',
    contactName: 'Lassy',
    contactNumber: 'no number - find me at the ranch',
    description: "This veritile van gives you the ability to give all kinds of stuff away.   You can't go wrong with this one."
   },
   {
    id: 11,
    image: 'https://cdn.vox-cdn.com/thumbor/wnyenanGPhxMGd-wAfNlcQzdcxs=/0x0:500x333/920x0/filters:focal(0x0:500x333):format(webp):no_upscale()/cdn.vox-cdn.com/uploads/chorus_asset/file/12417767/trpuAXZSQQOuW9NpPwPP_women_s_shoes_cheap_out_of_the_back_of_a_van_dr_heckle_funny_wtf_pictures.0.jpg',
    price: '$5',
    year: '1992',
    make: 'Ford',
    model: 'F-150 Cargo Van',
    mileage: '218.672',
    color: 'white',
    offering: 'shoes',
    contactName: 'Al Bundy',
    contactNumber: '555-2878',
    description: "Skip the nudie bar.   You'll be way happier selling women's shoes out of this van!"
   },
   {
    id: 12,
    image: 'https://i.kym-cdn.com/photos/images/newsfeed/000/108/541/freecandy.jpg',
    price: '$500',
    year: '1999',
    make: 'Dodge',
    model: 'Eco van',
    mileage: '192,463',
    color: 'Maroon',
    offering: 'Candy',
    contactName: 'Dean Arnold Corll',
    contactNumber: 'unknown',
    description: "Meet new people and enjoy their company with this van."
   },
   {
    id: 13,
    image: 'https://i.ytimg.com/vi/h2zlXJSkW8Y/hqdefault.jpg',
    price: '$2.99',
    year: '1972',
    make: 'Chevrolet',
    model: 'Mail Van',
    mileage: '284,388',
    color: 'Green',
    offering: 'Ice Cream',
    contactName: 'Ben or Jerry',
    contactNumber: '972-966-2697',
    description: "Change the world, one scoop at a time"
   },
   {
    id: 14,
    image: 'https://cdn.vox-cdn.com/thumbor/ATj9A5JBhSLSCYlWbaOZ1YBvOMs=/0x0:625x300/920x0/filters:focal(0x0:625x300):format(webp):no_upscale()/cdn.vox-cdn.com/uploads/chorus_asset/file/12417765/Ayh1u28xQv2hRze4tMTX_Discount-speakers-h.0.jpg',
    price: '$60,000',
    year: '2010',
    make: 'unknown',
    model: 'Van',
    mileage: '84,000',
    color: 'White',
    offering: 'Speakers',
    contactName: 'Mike Jones',
    contactNumber: '281-330-8004',
    description: "Because all the cool kids want discount speakers"
   },
  ];
    let currentID =0;


    // get (view) request for buys
  const buys = (req, res) => {
    res.json(items);
  };

  // post (add) request for buys
  const sell = (req, res) => {
    currentID=items.length
    req.body.id=currentID+1;
    items.push(req.body);
    res.json(items);
  };

 // delete request for buys
  const deleteItem = (req, res) => {
    const index = items.findIndex(element => element.id == req.params.id);
    items.splice(index, 1);
    res.json(items);
  };

// put (edit) request for buys
const update = (request, response) => {
         // find the id:
   let index=null;
   items.forEach((item, i) => {
      if(item.id === Number(request.params.id)) index = i;
   });
         // then do this:
    items[index] = {
      id: items[index].id,
      image: request.body.image || items[index].image,
      price: request.body.price || items[index].price,
      year: request.body.year || items[index].year,
      make: request.body.make || items[index].make,
      model: request.body.model || items[index].model,
      mileage: request.body.mileage || items[index].mileage,
      color: request.body.color || items[index].color,
      offering: request.body.offering || items[index].offering,
      contactName: request.body.contactName || items[index].contactName,
      contactNumber: request.body.contactNumber || items[index].contactNumber,
      description: request.body.description || items[index].description
    }
         // then show this in response
      response.status(200).send(items)
  }


// get (search) request for COLOR
  const searchColor = (req, res) =>{
    // console.log(req.params)
        // search for this
    let colored = items.filter(items => items.color.toLowerCase() === req.params.color.toLowerCase())
        // return this
        // console.log(colored)
    res.json(colored);
}


// // get (search) request for MAKE
const searchMake = (req, res) =>{
  console.log(req.params)
      // search for this
  let maked = items.filter(items => items.make.toLowerCase() === req.params.make.toLowerCase())
      // return this
      // console.log(maked)
  res.json(maked);
}

// exports
  module.exports = {
      buys, 
      sell,
      deleteItem,
      update,
      searchColor,
      searchMake
  };